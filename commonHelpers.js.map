{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n//axios.defaults.baseURL = '<https://pixabay.com/api/>';\nconst myApiKey = '43769783-4ebd08048bd6758fdf84d5c5e';\n\nexport const fetchPictureBySearch  = async (searchValue, perPage, numberPage) => {\n    try {\n        const response = await axios.get('https://pixabay.com/api/', {\n            params: {\n                key: myApiKey,\n                q: searchValue,\n                image_type: \"photo\",\n                orientation: \"horizontal\",\n                safesearch: \"true\",\n                per_page: perPage,\n                page: numberPage,\n\n            }\n        });\n        return response.data;\n    } catch (error) {\n\t\tconsole.log(error);\n\t}\n};\n\n","export const createGallery = images => {\n  return images\n           .map(\n            ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) =>\n   `<div class = \"image-holder\"><a class=\"gallery-link\" href=\"${largeImageURL}\">\n     <img  class=\"gallery-image\"\n      src=\"${webformatURL}\"\n      alt=\"${tags}\"\n    />\n    </a>\n   <div>\n   <table>\n   <tr class= \"title\">\n   <td>Likes</td> \n   <td>Views</td>\n   <td>Comments</td>\n   <td>Downloads</td>\n   </tr>\n   <tr>\n   <td>${likes}</td> \n   <td>${views}</td>\n   <td>${comments}</td>\n   <td>${downloads}</td>\n   </tr>\n   </table>\n   </div>\n    </div>\n    `\n    )\n  .join(\"\");\n  };\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { fetchPictureBySearch } from \"./js/pixabay-api.js\";\nimport { createGallery } from \"./js/render-functions.js\";\n\n\nconst inputForm = document.querySelector('input[name=\"search\"]');\nconst allImages = document.querySelector('.gallery-list');\nconst form = document.querySelector('.form-image-search');\nconst loader = document.querySelector('.loader');\nconst btnLoad = document.querySelector('.btn');\nform.addEventListener(\"submit\", performSearch);\nbtnLoad.addEventListener(\"click\", nextPage);\nlet search;\nlet page;\nconst perPage = 15;\nlet limit;\n\nasync function performSearch(event) {\n   event.preventDefault();\n   btnLoad.classList.add('is-hidden');\n   loader.classList.remove('is-hidden');\n   search = inputForm.value.trim();\n   page = 1;\n   allImages.innerHTML = \"\";\n   if (search === '') {\n      event.target.reset();\n      loader.classList.add('is-hidden');\n   } else {\n      try {\n         const imagesData = await fetchPictureBySearch(search, perPage, page);\n         if (imagesData.total === 0) {\n               iziToast.info({\n                  position: 'topRight',\n                  message: 'Sorry, there are no images matching your search query. Please try again!',\n                  color: 'red',\n                  timeout: 3000,\n            });\n            event.target.reset();\n         } else {\n            const searchedGallery = createGallery(imagesData.hits);\n            limit = imagesData.totalHits;\n            allImages.innerHTML = searchedGallery;\n            let newGallery = new SimpleLightbox('.gallery-list a', { captionsData: 'alt', captionDelay: 250 });\n            newGallery.refresh();\n            btnLoad.classList.remove('is-hidden');\n         }\n      } catch (error) {\n               console.log(error);\n      } finally {\n            event.target.reset();            \n            loader.classList.add('is-hidden');\n      };\n   }\n}\n\nasync function nextPage() {\n    page += 1;\n    const totalPages = Math.ceil(limit / perPage);\n    if (page > totalPages) {\n      btnLoad.classList.add('is-hidden');\n      return iziToast.info({\n         position: \"topRight\",\n         message: \"We're sorry, but you've reached the end of search results.\",\n         timeout: 3000,\n      });\n    } else {\n       try {\n          const imagesData = await fetchPictureBySearch(search, perPage, page);\n          const searchedGallery = createGallery(imagesData.hits);\n          allImages.insertAdjacentHTML(\"beforeend\", searchedGallery);\n          let newGallery = new SimpleLightbox('.gallery-list a', { captionsData: 'alt', captionDelay: 250 });\n          newGallery.refresh();\n       } catch (error) {\n          console.log(error);\n       } finally {\n            let elem = document.querySelector(\".image-holder\");\n            let rect = elem.getBoundingClientRect();\n            window.scrollBy(0, rect.height*2);\n            loader.classList.add('is-hidden');\n         };\n   }   \n}\n\n\n"],"names":["myApiKey","fetchPictureBySearch","searchValue","perPage","numberPage","axios","error","createGallery","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","inputForm","allImages","form","loader","btnLoad","performSearch","nextPage","search","page","limit","event","imagesData","iziToast","searchedGallery","SimpleLightbox","totalPages","rect"],"mappings":"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"}